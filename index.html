<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">

  <title>Frontend Mentor | Advice generator app</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            lightCyan: 'hsl(193, 38%, 86%)',
            neonGreen: 'hsl(150, 100%, 66%)',
            grayBlue: 'hsl(217, 19%, 38%)',
            darkGrayishBlue: 'hsl(217, 19%, 24%)',
            darkBlue: 'hsl(218, 23%, 16%)'
          },
          screens: {
            xs: '0px'
          }
        }
      }
    }
  </script>
  <style>
    html {
      min-height: 100%;
    }

    body {
      background-color: hsl(218, 23%, 16%);
      font-size: 16px;
      height: 100vh;
      padding: 0 1rem;
      font-family: 'Manrope', sans-serif;
    }

    .text-focus-in{-webkit-animation:text-focus-in 0.5s cubic-bezier(.55,.085,.68,.53) both;animation:text-focus-in 0.5s cubic-bezier(.55,.085,.68,.53) both}

/* ----------------------------------------------
 * Generated by Animista on 2023-4-5 1:5:11
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

 @-webkit-keyframes text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}100%{-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}100%{-webkit-filter:blur(0);filter:blur(0);opacity:1}}
  </style>
</head>

<body>
  <div class="h-full w-full flex justify-center items-center">
    <div class="max-w-[500px] h-auto p-10 bg-darkGrayishBlue relative rounded-lg">
      <div class="text-neonGreen text-center font-extrabold text-xs tracking-[0.2rem]">ADVICE <span
          id="adviceId"></span> </div>
      <blockquote id="preview" class="text-lightCyan text-center text-[28px] min-h-[130px]
      font-extrabold mt-4 text-focus-in"></blockquote>
      <img class="my-8 hidden md:block" src="./images/pattern-divider-desktop.svg" alt="icon-dice">
      <img class="my-8 hidden max-md:block mx-auto" src="./images/pattern-divider-mobile.svg" alt="icon-dice">
      <button id="btnDice" class="group rounded-full p-4 bg-neonGreen absolute 
        bottom-[-28px] left-[50%] translate-x-[-50%]
        hover:shadow-[0_0_20px_4px_rgba(45,255,196,0.9)] transition-all duration-300">
        <img src="./images/icon-dice.svg" class="group-hover:rotate-12 transition-all duration-300" alt="icon-dice">
      </button>
    </div>
  </div>
  <script>
    const adviceId = document.getElementById("adviceId")
    const preview = document.getElementById("preview")
    const btnDice = document.getElementById("btnDice")

    async function fetchAdvice() {
      try {
        const res = await fetch('https://api.adviceslip.com/advice')
        const data = await res.json()
        return data
      } catch (error) {
        console.error(error);
        return null
      }
    }

    function setPreview(advice = '', id = '') {
      adviceId.style.display = 'none'
      preview.classList.add('text-focus-in')
      adviceId.innerText = `#${id}`
      preview.innerText = `“${advice}”`
      adviceId.style.display = 'inline-block'
    }

    btnDice.addEventListener('click', (e)=> {
      e.preventDefault()
      preview.classList.remove('text-focus-in')
      init()
    })

    async function init() {
      btnDice.disabled = true
      const data = await fetchAdvice()
      if (data) {
        const { slip: { advice, id } } = data 
        setPreview(advice, id)
      }
      btnDice.disabled = false
    }
    init()
  </script>
</body>

</html>